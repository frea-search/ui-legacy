# サブシステムについて
Frea Search は SearXNG のフォークとして開発されています。しかし変更を加えるにつれてアップストリーム（フォーク元）のアップデートをマージする際にコンフリクトが発生したり、既存の仕組みでは機能や速度が不十分だったりなど様々な不便が発生しました。そこで実装されたのがサブシステムです。

## 仕組み
サブシステムはメインプロセス（uwsgi）とは別プロセスで実行される、1つの独立したバイナリファイルやPythonプログラムです。メインプロセスとの通信にはUNIXソケットを使います。これは、サブシステムはUNIXソケットを扱える言語であるすべての言語で記述可能ということを意味しています。  
サブシステムの本来の目的はアップストリームのコードとの互換性を維持しながら高度な機能を実装するためですが、高速化にも使用できます。将来的にブラックリストとの照合など高負荷な処理を高速な言語でサブシステムとして実装する予定です。

## サブシステムの起動
サブシステムはRustで記述された小さなプログラム（./tools/init）から起動されます。文字通りinitはコンテナ内でエントリーポイントとしてPID1で実行されます。このinitにはサブシステムが異常終了した際に再起動させる役割もあります。
